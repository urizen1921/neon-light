{"ast":null,"code":"var _jsxFileName = \"/home/urizen1921/Documents/gitHubProjects/neon-lights/neon/client/src/views/login.jsx\";\nimport React, { useState } from 'react';\nimport authSvg from \"../assets/login.svg\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport { authenticate, isAuth } from '../helpers/auth';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\n;\n\nconst Login = ({\n  history\n}) => {\n  const [formData, setFormData] = useState({\n    email: '',\n    password1: '',\n    textChange: 'Sign In'\n  });\n  const {\n    email,\n    password1,\n    textChange\n  } = formData; //Handle change from inputs\n\n  const handleChange = text => event => {\n    setFormData({ ...formData,\n      [text]: event.target.value\n    });\n  };\n\n  const sendGoogleToken = tokenId => {\n    axios.post(`${process.env.REACT_APP_API_URL}/googlelogin`, {\n      idToken: tokenId\n    }).then(res => {\n      informParent(res);\n    }).catch(error => {\n      console.log('Google SignIn Error', error.response);\n    });\n  };\n\n  const informParent = response => {\n    authenticate(response, () => {\n      isAuth() && isAuth().role === 'admin' ? history.push('/admin') : history.push('/private');\n    });\n  };\n\n  const sendFacebookToken = (userId, accessToken) => {\n    axios.post(`${process.env.REACT_APP_API_URL}/facebooklogin`, {\n      userId,\n      accessToken\n    }).then(res => {\n      informParent(res);\n    }).catch(error => {\n      console.log('Facebook SignIn Error', error.response);\n    });\n  };\n\n  const responseGoogle = response => {\n    console.log(response);\n    sendGoogleToken(response.tokenId);\n  };\n\n  const responseFacebook = response => {\n    console.log(response);\n    sendFacebookToken(response.userId, response.accessToken);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (email && password1) {\n      setFormData({ ...formData,\n        textChange: 'Submitting'\n      });\n      axios.post(`${process.env.REACT_APP_API_URL}/login`, {\n        email,\n        password: password1\n      }).then(res => {\n        authenticate(res, () => {\n          setFormData({ ...formData,\n            email: '',\n            password1: '',\n            textChange: 'Submitted'\n          }); //if authenticated but not admin redirect to /private\n          //if admin redirect to /admin\n\n          isAuth() && isAuth().role === 'admin' ? history.push('/admin') : history.push('/private');\n          toast.success(`Hey ${res.data.user.name}, Welcome back!`);\n        });\n      }).catch(err => {\n        setFormData({ ...formData,\n          email: '',\n          password1: '',\n          textChange: 'Sign In'\n        }); //console.log(err);\n\n        toast.error(err.res.data.error); //toast.error(err);\n      });\n    } else {\n      toast.error('Please fill al fields');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-900 flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, isAuth() ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }) : null, /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-screen-xl m-0 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lg:w-1/2 xl:w-5/12 p-6 sm:p-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-12 flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl xl:text-3xl font-extrabold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Sign In for Neon Lights\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full flex-1 mt-8 text-indigo-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: `${process.env.REACT_APP_GOOGLE_CLIENT}`,\n    onSuccess: responseGoogle,\n    onFailure: responseGoogle,\n    cookiePolicy: 'single_host_origin',\n    render: renderProps => /*#__PURE__*/React.createElement(\"button\", {\n      onClick: renderProps.onClick,\n      disabled: renderProps.disabled,\n      className: \"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" p-2 rounded-full \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fab fa-google \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 23\n      }\n    }, \"Sign In with Google\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: `${process.env.REACT_APP_FACEBOOK_CLIENT}`,\n    autoLoad: false,\n    callback: responseFacebook,\n    render: renderProps => /*#__PURE__*/React.createElement(\"button\", {\n      onClick: renderProps.onClick,\n      className: \"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" p-2 rounded-full \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fab fa-facebook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 23\n      }\n    }, \"Sign In with Facebook\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\",\n    href: \"/register\",\n    target: \"_self\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-user-plus fa 1x w-6  -ml-2 text-indigo-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }, \"Sign Up\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-12 border-b text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"leading-none px-2 inline-block text-sm text-gray-600 tracking-wide font-medium bg-white transform translate-y-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"Or sign In with e-mail\")), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mx-auto max-w-xs relative \",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white\",\n    type: \"email\",\n    placeholder: \"Email\",\n    onChange: handleChange('email'),\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5\",\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: handleChange('password1'),\n    value: password1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"mt-5 tracking-wide font-semibold bg-indigo-500 text-gray-100 w-full py-4 rounded-lg hover:bg-indigo-700 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-sign-in-alt  w-6  -ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 19\n    }\n  }, \"Sign In\")), /*#__PURE__*/React.createElement(Link, {\n    to: \"/users/password/forget\",\n    className: \"no-underline hover:underline text-indigo-500 text-md text-right absolute right-0  mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, \"Forget password?\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 bg-indigo-100 text-center hidden lg:flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat\",\n    style: {\n      backgroundImage: `url(${authSvg})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }))), \";\");\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/urizen1921/Documents/gitHubProjects/neon-lights/neon/client/src/views/login.jsx"],"names":["React","useState","ToastContainer","toast","authenticate","isAuth","axios","Link","Redirect","GoogleLogin","FacebookLogin","Login","history","formData","setFormData","email","password1","textChange","handleChange","text","event","target","value","sendGoogleToken","tokenId","post","process","env","REACT_APP_API_URL","idToken","then","res","informParent","catch","error","console","log","response","role","push","sendFacebookToken","userId","accessToken","responseGoogle","responseFacebook","handleSubmit","preventDefault","password","success","data","user","name","err","REACT_APP_GOOGLE_CLIENT","renderProps","onClick","disabled","REACT_APP_FACEBOOK_CLIENT","backgroundImage","authSvg"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport authSvg from '../assets/login.svg';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { authenticate, isAuth} from '../helpers/auth';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';;\n\nconst Login = ({ history }) => {\n\n  const [formData, setFormData] = useState({\n    email: '',\n    password1: '',\n    textChange: 'Sign In'\n  });\n  const {email, password1, textChange } = formData;\n\n  //Handle change from inputs\n  const handleChange = (text) => (event) => {\n    setFormData({...formData, [text]: event.target.value});\n  };\n\n  const sendGoogleToken = (tokenId) => {\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/googlelogin`, {\n        idToken: tokenId\n      })\n      .then(res => {\n        informParent(res);\n      })\n      .catch(error => {\n        console.log('Google SignIn Error', error.response);\n      });\n  };\n\n  const informParent = (response) => {\n    authenticate(response, () => {\n      isAuth() && isAuth().role === 'admin'\n        ? history.push('/admin')\n        : history.push('/private');\n    });\n  };\n\n  const sendFacebookToken = (userId, accessToken) => {\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/facebooklogin`, {\n        userId,\n        accessToken\n      })\n      .then(res => {\n        informParent(res);\n      })\n      .catch(error => {\n        console.log('Facebook SignIn Error', error.response);\n      });\n  };\n\n  const responseGoogle = (response) => {\n    console.log(response);\n    sendGoogleToken(response.tokenId);\n  };\n\n  const responseFacebook = (response) => {\n    console.log(response);\n    sendFacebookToken(response.userId, response.accessToken);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    if(email && password1) {\n\n      setFormData({...formData, textChange: 'Submitting'});\n\n      axios\n        .post(`${process.env.REACT_APP_API_URL}/login`, {\n          email,\n          password: password1\n        })\n        .then(res => {\n          authenticate(res, () => {\n            setFormData({\n              ...formData,\n              email: '',\n              password1: '',\n              textChange: 'Submitted'\n            });\n            //if authenticated but not admin redirect to /private\n            //if admin redirect to /admin\n            isAuth() && isAuth().role === 'admin'\n              ? history.push('/admin')\n              : history.push('/private');\n            \n            toast.success(`Hey ${res.data.user.name}, Welcome back!`);\n          });\n\n        })\n        .catch(err => {\n          setFormData({\n            ...formData,\n            email: '',\n            password1: '',\n            textChange: 'Sign In'\n          });\n          //console.log(err);\n          toast.error(err.res.data.error);\n          //toast.error(err);\n        });\n    } else {\n      toast.error('Please fill al fields');\n    }\n  };\n\n  return (\n    <div className='min-h-screen bg-gray-100 text-gray-900 flex justify-center'>\n      {isAuth() ? <Redirect to='/' /> : null}\n      <ToastContainer />\n      <div className='max-w-screen-xl m-0 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center flex-1'>\n        <div className='lg:w-1/2 xl:w-5/12 p-6 sm:p-12'>\n          <div className='mt-12 flex flex-col items-center'>\n            <h1 className='text-2xl xl:text-3xl font-extrabold'>\n              Sign In for Neon Lights\n            </h1>\n            <div className='w-full flex-1 mt-8 text-indigo-500'>\n              <div className='flex flex-col items-center'>\n                <GoogleLogin\n                  clientId={`${process.env.REACT_APP_GOOGLE_CLIENT}`}\n                  onSuccess={responseGoogle}\n                  onFailure={responseGoogle}\n                  cookiePolicy={'single_host_origin'}\n                  render={renderProps => (\n                    <button\n                      onClick={renderProps.onClick}\n                      disabled={renderProps.disabled}\n                      className='w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline'\n                    >\n                      <div className=' p-2 rounded-full '>\n                        <i className='fab fa-google ' />\n                      </div>\n                      <span className='ml-4'>Sign In with Google</span>\n                    </button>\n                  )}\n                ></GoogleLogin>\n                <FacebookLogin\n                  appId={`${process.env.REACT_APP_FACEBOOK_CLIENT}`}\n                  autoLoad={false}\n                  callback={responseFacebook}\n                  render={renderProps => (\n                    <button\n                      onClick={renderProps.onClick}\n                      className='w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5'\n                    >\n                      <div className=' p-2 rounded-full '>\n                        <i className='fab fa-facebook' />\n                      </div>\n                      <span className='ml-4'>Sign In with Facebook</span>\n                    </button>\n                  )}\n                />\n                <a\n                  className='w-full max-w-xs font-bold shadow-sm rounded-lg py-3\n           bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5'\n                  href='/register'\n                  target='_self'\n                >\n                  <i className='fas fa-user-plus fa 1x w-6  -ml-2 text-indigo-500' />\n                  <span className='ml-4'>Sign Up</span>\n                </a>\n              </div>\n              <div className='my-12 border-b text-center'>\n                <div className='leading-none px-2 inline-block text-sm text-gray-600 tracking-wide font-medium bg-white transform translate-y-1/2'>\n                  Or sign In with e-mail\n                </div>\n              </div>\n              <form\n                className='mx-auto max-w-xs relative '\n                onSubmit={handleSubmit}\n              >\n                <input\n                  className='w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white'\n                  type='email'\n                  placeholder='Email'\n                  onChange={handleChange('email')}\n                  value={email}\n                />\n                <input\n                  className='w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5'\n                  type='password'\n                  placeholder='Password'\n                  onChange={handleChange('password1')}\n                  value={password1}\n                />\n                <button\n                  type='submit'\n                  className='mt-5 tracking-wide font-semibold bg-indigo-500 text-gray-100 w-full py-4 rounded-lg hover:bg-indigo-700 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none'\n                >\n                  <i className='fas fa-sign-in-alt  w-6  -ml-2' />\n                  <span className='ml-3'>Sign In</span>\n                </button>\n                <Link\n                  to='/users/password/forget'\n                  className='no-underline hover:underline text-indigo-500 text-md text-right absolute right-0  mt-2'\n                >\n                  Forget password?\n                </Link>\n              </form>\n            </div>\n          </div>\n        </div>\n        <div className='flex-1 bg-indigo-100 text-center hidden lg:flex'>\n          <div\n            className='m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat'\n            style={{ backgroundImage: `url(${authSvg})` }}\n          ></div>\n        </div>\n      </div>\n      ;\n    </div>\n\n  );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}